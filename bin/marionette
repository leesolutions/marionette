#!/usr/local/bin/ruby

require 'rubygems'
require 'daemons'
require 'marionette'

tcp = ARGV[1] rescue nil
options = { :uri => tcp } unless ARGV.nil?

Daemons.run_proc('marionette',:dir_mode => :system, :log_output => true) do
  HeadStartApp::Marionette::Connect.new(options).puppet
end
